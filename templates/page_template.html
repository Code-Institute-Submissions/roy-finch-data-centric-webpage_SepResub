<!DOCTYPE html>
{% extends "base.html" %}
{% block content %}
<section>
    <header>
        <h3 class="center" id="title">
            <span class="retro">{{ red }}</span>
            <span class="review">{{ blue }}</span>
        </h3>
        <hr>
        <p>This game is part of the {{ game.series }} series and was on the {{ game.console }}. {{ game.details }}</p>
        {% if user.username != "" %}
            <details>
                <p class="blue">Within this section you can create a comment. You can create a title which contains 50 characters, and a comment which contains 350 characters. Please select the type of comment that you think your comment falls under.</p>
                <summary>Add a comment</summary>
                <form method="POST" class="center">
                    <input type="text" maxlength="50" placeholder="Enter a title" name="Title" autocomplete="off" required>
                    <br>
                    <br>
                    <label for="Radio1">Guide</label>
                    <input type="radio" name="Radio" value="guide" required>
                    <label for="Radio2">Trivia</label>
                    <input type="radio" name="Radio" value="trivia" required>
                    <label for="Radio3">Glitches</label>
                    <input type="radio" name="Radio" value="glitch" required>
                    <label for="Radio4">General</label>
                    <input type="radio" name="Radio" value="general" required>
                    <br>
                    <br>
                    <textarea rows="12" maxlength="425" type="text" placeholder="Enter a description of the game" name="Details" autocomplete="off" required></textarea>
                    <button type="submit" >Submit Query</button>
                </form>
            </details>
        {% endif %}
        <span class="right">by {{ game.page_creater }}</span>
    </header>
</section>
{% if "guide" in game.comment_tag %}
    <section>
        <header>
            <h4>Guides</h4>
            <hr>
        </header>
        {% for rr_tag in game.rr_tag_comment %}
            {% if game.comment_tag[game.rr_tag_comment[loop.index-1]] == "guide" %}
                {% if game.rr_tag_comment[loop.index-2]+1 != game.rr_tag_comment[loop.index-1] or game.comment_tag[game.rr_tag_comment[loop.index-2]] != game.comment_tag[game.rr_tag_comment[loop.index-1]] %}
                    <details class="comment rr-tag">
                        <summary>
                            {{ game.comment_title[game.rr_tag_comment[loop.index-1]] }}
                            <span class="right">by {{ game.author[game.rr_tag_comment[loop.index-1]] }}</span>
                        </summary>
                {% endif %}
                <span class="content">{{ game.comment[game.rr_tag_comment[loop.index-1]] }}</span>
                <br>
                {% if loop.index == game.rr_tag_comment|length or game.rr_tag_comment[loop.index-1]+1 != game.rr_tag_comment[loop.index] or game.comment_tag[game.rr_tag_comment[loop.index-1]] != game.comment_tag[game.rr_tag_comment[loop.index]] %}
                    </details>
                {% endif %}
            {% endif %}
        {% endfor %}
        {% for tag in game.comment_tag %}
            {% if tag == "guide" %}
                {% if loop.index-1 == 0 or (game.comment_title[loop.index-2] != game.comment_title[loop.index-1] or game.author[loop.index-2] != game.author[loop.index-1]) %}
                    {% if loop.index-1 not in game.rr_tag_comment %}
                        <details class="comment bottom">
                            <summary>
                                {{ game.comment_title[loop.index-1] }}
                                <span class="right">by {{ game.author[loop.index-1] }}</span>
                            </summary>
                    {% endif %}
                {% endif %}
                {% if loop.index-1 not in game.rr_tag_comment %}
                    <span class="content">{{ game.comment[loop.index-1] }}</span>
                    <br>
                {% endif %}
                {% if game.comment_tag[loop.index-1] != game.comment_tag[loop.index] or game.comment_title[loop.index-1] != game.comment_title[loop.index] or game.author[loop.index-1] != game.author[loop.index] %}
                    </details>
                {% endif %}
            {% endif %}
        {% endfor %}
    </section>
{% endif %}
{% if "trivia" in game.comment_tag %}
    <section>
        <header>
            <h4>Trivia</h4>
            <hr>
        </header>
        {% for rr_tag in game.rr_tag_comment %}
            {% if game.comment_tag[game.rr_tag_comment[loop.index-1]] == "trivia" %}
                {% if game.rr_tag_comment[loop.index-2]+1 != game.rr_tag_comment[loop.index-1] or game.comment_tag[game.rr_tag_comment[loop.index-2]] != game.comment_tag[game.rr_tag_comment[loop.index-1]] %}
                    <details class="comment rr-tag">
                        <summary>
                            {{ game.comment_title[game.rr_tag_comment[loop.index-1]] }}
                            <span class="right">by {{ game.author[game.rr_tag_comment[loop.index-1]] }}</span>
                        </summary>
                {% endif %}
                <span class="content">{{ game.comment[game.rr_tag_comment[loop.index-1]] }}</span>
                <br>
                {% if loop.index == game.rr_tag_comment|length or game.rr_tag_comment[loop.index-1]+1 != game.rr_tag_comment[loop.index] or game.comment_tag[game.rr_tag_comment[loop.index-1]] != game.comment_tag[game.rr_tag_comment[loop.index]] %}
                    </details>
                {% endif %}
            {% endif %}
        {% endfor %}
        {% for tag in game.comment_tag %}
            {% if tag == "trivia" %}
                {% if loop.index-1 == 0 or (game.comment_title[loop.index-2] != game.comment_title[loop.index-1] or game.author[loop.index-2] != game.author[loop.index-1]) %}
                    {% if loop.index-1 not in game.rr_tag_comment %}
                        <details class="comment bottom">
                            <summary>
                                {{ game.comment_title[loop.index-1] }}
                                <span class="right">by {{ game.author[loop.index-1] }}</span>
                            </summary>
                    {% endif %}
                {% endif %}
                {% if loop.index-1 not in game.rr_tag_comment %}
                    <span class="content">{{ game.comment[loop.index-1] }}</span>
                    <br>
                {% endif %}
                {% if game.comment_tag[loop.index-1] != game.comment_tag[loop.index] or game.comment_title[loop.index-1] != game.comment_title[loop.index] or game.author[loop.index-1] != game.author[loop.index] %}
                    </details>
                {% endif %}
            {% endif %}
        {% endfor %}
    </section>
{% endif %}
{% if "glitch" in game.comment_tag %}
    <section>
        <header>
            <h4>Glitches</h4>
            <hr>
        </header>
        {% for rr_tag in game.rr_tag_comment %}
            {% if game.comment_tag[game.rr_tag_comment[loop.index-1]] == "glitch" %}
                {% if game.rr_tag_comment[loop.index-2]+1 != game.rr_tag_comment[loop.index-1] or game.comment_tag[game.rr_tag_comment[loop.index-2]] != game.comment_tag[game.rr_tag_comment[loop.index-1]] %}
                    <details class="comment rr-tag">
                        <summary>
                            {{ game.comment_title[game.rr_tag_comment[loop.index-1]] }}
                            <span class="right">by {{ game.author[game.rr_tag_comment[loop.index-1]] }}</span>
                        </summary>
                {% endif %}
                <span class="content">{{ game.comment[game.rr_tag_comment[loop.index-1]] }}</span>
                <br>
                {% if loop.index == game.rr_tag_comment|length or game.rr_tag_comment[loop.index-1]+1 != game.rr_tag_comment[loop.index] or game.comment_tag[game.rr_tag_comment[loop.index-1]] != game.comment_tag[game.rr_tag_comment[loop.index]] %}
                    </details>
                {% endif %}
            {% endif %}
        {% endfor %}
        {% for tag in game.comment_tag %}
            {% if tag == "glitch" %}
                {% if loop.index-1 == 0 or (game.comment_title[loop.index-2] != game.comment_title[loop.index-1] or game.author[loop.index-2] != game.author[loop.index-1]) %}
                    {% if loop.index-1 not in game.rr_tag_comment %}
                        <details class="comment bottom">
                            <summary>
                                {{ game.comment_title[loop.index-1] }}
                                <span class="right">by {{ game.author[loop.index-1] }}</span>
                            </summary>
                    {% endif %}
                {% endif %}
                {% if loop.index-1 not in game.rr_tag_comment %}
                    <span class="content">{{ game.comment[loop.index-1] }}</span>
                    <br>
                {% endif %}
                {% if game.comment_tag[loop.index-1] != game.comment_tag[loop.index] or game.comment_title[loop.index-1] != game.comment_title[loop.index] or game.author[loop.index-1] != game.author[loop.index] %}
                    </details>
                {% endif %}
            {% endif %}
        {% endfor %}
    </section>
{% endif %}
{% if "general" in game.comment_tag %}
    <section>
        <header>
            <h4>General</h4>
            <hr>
        </header>
        {% for rr_tag in game.rr_tag_comment %}
            {% if game.comment_tag[game.rr_tag_comment[loop.index-1]] == "general" %}
                {% if game.rr_tag_comment[loop.index-2]+1 != game.rr_tag_comment[loop.index-1] or game.comment_tag[game.rr_tag_comment[loop.index-2]] != game.comment_tag[game.rr_tag_comment[loop.index-1]] %}
                    <details class="comment rr-tag">
                        <summary>
                            {{ game.comment_title[game.rr_tag_comment[loop.index-1]] }}
                            <span class="right">by {{ game.author[game.rr_tag_comment[loop.index-1]] }}</span>
                        </summary>
                {% endif %}
                <span class="content">{{ game.comment[game.rr_tag_comment[loop.index-1]] }}</span>
                <br>
                {% if loop.index == game.rr_tag_comment|length or game.rr_tag_comment[loop.index-1]+1 != game.rr_tag_comment[loop.index] or game.comment_tag[game.rr_tag_comment[loop.index-1]] != game.comment_tag[game.rr_tag_comment[loop.index]] %}
                    </details>
                {% endif %}
            {% endif %}
        {% endfor %}
        {% for tag in game.comment_tag %}
            {% if tag == "general" %}
                {% if loop.index-1 == 0 or (game.comment_title[loop.index-2] != game.comment_title[loop.index-1] or game.author[loop.index-2] != game.author[loop.index-1]) %}
                    {% if loop.index-1 not in game.rr_tag_comment %}
                        <details class="comment bottom">
                            <summary>
                                {{ game.comment_title[loop.index-1] }}
                                <span class="right">by {{ game.author[loop.index-1] }}</span>
                            </summary>
                    {% endif %}
                {% endif %}
                {% if loop.index-1 not in game.rr_tag_comment %}
                    <span class="content">{{ game.comment[loop.index-1] }}</span>
                    <br>
                {% endif %}
                {% if game.comment_tag[loop.index-1] != game.comment_tag[loop.index] or game.comment_title[loop.index-1] != game.comment_title[loop.index] or game.author[loop.index-1] != game.author[loop.index] %}
                    </details>
                {% endif %}
            {% endif %}
        {% endfor %}
    </section>
{% endif %}
{% endblock %}